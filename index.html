<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TRAVEL EXPLORE</title>
    <link rel="stylesheet" href="mahesh/chatbot.css">
<script src="mahesh/chatbot.js"></script>


    <style>
        /* --- Base Section Cards --- */
        .section {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            padding: 5px;
            max-width: 1000px;
            margin: 20px auto;
        }

        .section a {
            text-align: center;
            text-decoration: none;
            color: #333;
            width: 150px;
        }

        .section img {
            width: 100%;
            height: 100px;
            object-fit: cover;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s;
        }

        .section img:hover {
            transform: scale(1.05);
        }

        /* --- Explore Section --- */
        .explore-section {
            text-align: center;
            margin: 60px auto;
            padding: 30px;
            /* NOTE: Changed to Deep Charcoal for premium look */
            background: #343A40; 
            border-radius: 10px;
            max-width: 1200px;
        }

        .explore-section h2 {
            /* NOTE: Changed to Gold for premium look */
            color: #CCA64C; 
            margin-bottom: 20px;
        }

        .destination-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 20px;
            justify-items: center;
        }

        .destination-card {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            /* NOTE: Added subtle shadow for premium look */
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2); 
            cursor: pointer;
            transition: transform 0.2s;
            width: 180px;
        }

        .destination-card:hover {
            transform: scale(1.05);
        }

        .destination-card img {
            width: 100%;
            height: 120px;
            object-fit: cover;
        }

        .destination-card h3 {
            margin: 10px;
            font-size: 16px;
            color: #333;
        }
        
        /* --- Map Results Container --- */
        #map-results {
            text-align: center;
            margin: 40px auto;
            max-width: 1000px; 
            padding-bottom: 80px; /* Space above chatbot */
        }

        #map-frame {
            width: 100%;
            height: 500px; 
            border: 1px solid #ccc;
            border-radius: 8px;
        }

        /* --- Chat toggle (remains the same) --- */
        #chat-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            font-size: 24px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            cursor: pointer;
            z-index: 1000;
        }

        /* --- Chatbot Box (remains the same) --- */
        #chatbot-box {
            position: fixed;
            bottom: 90px;
            right: 20px;
            width: 300px;
            height: 400px;
            background: white;
            border: 1px solid #ccc;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            display: none;
            flex-direction: column;
            z-index: 1000;
        }
    </style>
</head>

<body>
    <div id="logged-out-header" class="top-links">
        <a href="signup.html"><h3>Sign Up</h3></a>
        <a href="login.html"><h3>Sign In</h3></a>
        <a href="https://www.google.co.in/"><h3>üîé Search</h3></a>
    </div>

    <div id="logged-in-header" class="top-links" style="display: none;">
        <a href="#" id="menu-toggle" class="menu-icon">‚ò∞</a>
        <a href="https://www.google.co.in/"><h3>üîé Search</h3></a>
        <a href="profile.html" class="user-icon">üë§</a>
    </div>

    <div id="sidebar-menu" class="sidebar">
        <a href="index.html" class="active-link">üè† Home</a>
        <a href="index2.html">üó∫Ô∏è Explore</a>
        <a href="index3.html">‚ÑπÔ∏è About us</a>
        <a href="feedback.html">üó£Ô∏è Feedback</a>
        <a href="index4.html">üìÖ Trip Planner</a>
        <hr />
        <a href="profile.html">‚öôÔ∏è Settings / Profile</a>
        <a href="#" id="logout-link" class="logout-link">üö™ Log Out</a>
    </div>

    <h1 style="text-align: center; color: #007bff"><i>Discover Places Near You</i></h1>
    <h4 style="text-align: center; color: #555"><i>This is the best guide of your city</i></h4>

    <div class="section">
        <a href="#" onclick="findNearby('hotels'); return false;">
            <img src="hotels.jpeg" alt="Hotels" />
            <h3><i>Hotels</i></h3>
        </a>
        <a href="#" onclick="findNearby('restaurants'); return false;">
            <img src="restra.jpeg" alt="Restaurants" />
            <h3><i>Restaurants</i></h3>
        </a>
        <a href="#" onclick="findNearby('shopping'); return false;">
            <img src="shopping.jpeg" alt="Shopping" />
            <h3><i>Shopping</i></h3>
        </a>
        <a href="#" onclick="findNearby('travels'); return false;">
            <img src="travel.jpeg" alt="Travels" />
            <h3><i>Travels</i></h3>
        </a>
        <a href="#" onclick="findNearby('cinema'); return false;">
            <img src="cinema.jpeg" alt="Cinema" />
            <h3><i>Cinema</i></h3>
        </a>
    </div>

    <section class="explore-section" id="explore">
        <h2>Explore Top Destinations</h2>

        <div class="destination-grid">
            <div class="destination-card" onclick="openMap('Varanasi')">
                <img src="varanasi.jpg" alt="Varanasi" />
                <h3>Varanasi</h3>
            </div>
            <div class="destination-card" onclick="openMap('Goa')">
                <img src="goa.jpg" alt="Goa" />
                <h3>Goa</h3>
            </div>
            <div class="destination-card" onclick="openMap('New Delhi')">
                <img src="delhi.jpg" alt="Delhi" />
                <h3>New Delhi</h3>
            </div>
            <div class="destination-card" onclick="openMap('Jaipur')">
                <img src="jaipur.jpg" alt="Jaipur" />
                <h3>Jaipur</h3>
            </div>
            <div class="destination-card" onclick="openMap('Kerala')">
                <img src="kerala.jpg" alt="Kerala" />
                <h3>Kerala</h3>
            </div>
            <div class="destination-card" onclick="openMap('Ladakh')">
                <img src="ladakh.jpg" alt="Ladakh" />
                <h3>Ladakh</h3>
            </div>
        </div>
    </section>

    <section id="map-results">
        <h2>Nearby Results (Map View)</h2>
        <iframe 
            id="map-frame" 
            title="Map Results"
            src="" 
            allowfullscreen="" 
            loading="lazy">
        </iframe>
    </section>

    <button id="chat-toggle">üí¨</button>
    <div id="chatbot-box">
        <div id="chat-header">ü§ñ TravelMate</div>
        <div id="chat-body"></div>
        <input type="text" id="chat-input" placeholder="Type your message..." />
    </div>

    <script>
        // ===== Header Toggle =====
        function updateHeaderState() {
            const isLoggedIn = localStorage.getItem("isLoggedIn") === "true";
            document.getElementById("logged-out-header").style.display = isLoggedIn ? "none" : "flex";
            document.getElementById("logged-in-header").style.display = isLoggedIn ? "flex" : "none";
        }
        updateHeaderState();

        // ===== Nearby Places (FIXED) =====
        function findNearby(type) {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition((position) => {
                    const lat = position.coords.latitude;
                    const lon = position.coords.longitude;
                    let search_query = ""; 

                    switch (type) {
                        case "hotels":
                            search_query = "Hotels near me";
                            break;
                        case "restaurants":
                            search_query = "Restaurants near me";
                            break;
                        case "shopping":
                            search_query = "Shopping Malls near me";
                            break;
                        case "travels":
                            search_query = "Tourist Attractions near me";
                            break;
                        case "cinema":
                            search_query = "Cinemas near me"; 
                            break;
                        default:
                            alert("Unknown category");
                            return;
                    }

                    // Google Maps Embed URL for searching near current location
                    const embedUrl = `https://maps.google.com/maps?q=${encodeURIComponent(search_query)}&ll=${lat},${lon}&z=15&output=embed`;

                    // Update the iframe source
                    document.getElementById('map-frame').src = embedUrl;

                }, (error) => {
                    alert(`Error getting location. Please enable location services. (${error.message})`);
                });
            } else {
                alert("Geolocation not supported by your browser.");
            }
        }

        // ===== Open Specific City (FIXED) =====
        function openMap(place) {
            // Google Maps Embed URL for searching a specific place
            const embedUrl = `https://maps.google.com/maps?q=${encodeURIComponent(place)}&z=10&output=embed`;
            
            // Update the iframe source
            document.getElementById('map-frame').src = embedUrl;
        }

        // ===== Sidebar =====
        const menuToggle = document.getElementById("menu-toggle");
        if (menuToggle) {
            menuToggle.onclick = function () {
                document.getElementById("sidebar-menu").classList.toggle("open");
            };
        }

        // ===== Logout =====
        const logoutLink = document.getElementById("logout-link");
        if (logoutLink) {
            logoutLink.onclick = function (e) {
                e.preventDefault();
                localStorage.setItem("isLoggedIn", "false");
                location.reload();
            };
        }
    </script>

    <script src="dharshan/chatbot.js"></script>
</body>
</html>